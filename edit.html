<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸€ ìˆ˜ì • - ONM ì¹´í˜</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="my.css">
</head>

<body>
    <!-- Header -->
    <header class="cafe-header">
        <div class="container">
            <a href="https://www.naver.com" target="_blank">
                <img src="naver.jpg" alt="NAVER" class="naver-logo">
            </a>
            <div class="cafe-logo text-center py-3">
                <img src="logo.jpg" alt="ONM">
            </div>
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 col-md-4 sidebar-col">
                <div class="cafe-sidebar">
                    <div class="cafe-info-card">
                        <div class="cafe-profile">
                            <img src="logo.jpg" alt="ONM" class="cafe-profile-img">
                            <p>í•œìƒˆì‚¬ëŒ ê³µì‹ì¹´í˜</p>
                            <div class="cafe-stats">
                                <div class="stat-item">
                                    <span class="stat-icon">ğŸ‘¥</span>
                                    <span class="stat-text">0ëª…</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-icon">ğŸŒ</span>
                                    <span class="stat-text">ì§€ì—­ì •ë³´</span>
                                </div>
                            </div>
                        </div>

                        <div class="cafe-actions">
                            <button class="btn btn-success btn-block mb-2" disabled>
                                ì¹´í˜ ê¸€ì“°ê¸°
                            </button>
                            <button class="btn btn-outline-secondary btn-block">
                                ì¹´í˜ ì±„íŒ…
                            </button>
                        </div>

                        <div class="board-menu">
                            <div class="board-title">
                                <span class="star-icon">â­</span>
                                ì¦ê²¨ì°¾ëŠ” ê²Œì‹œíŒ
                            </div>
                            <ul class="board-list">
                                <li class="board-item">
                                    <a href="index.html" class="board-link">ì „ì²´ê¸€ë³´ê¸°</a>
                                    <span class="post-count">0</span>
                                </li>
                                <li class="board-item">
                                    <a href="#" class="board-link">ê³µì§€</a>
                                    <span class="post-count">0</span>
                                </li>
                                <li class="board-item active">
                                    <a href="#" class="board-link">ììœ </a>
                                    <span class="post-count">0</span>
                                </li>
                                <li class="board-item">
                                    <a href="#" class="board-link">ì‚¬ì§„</a>
                                    <span class="post-count">0</span>
                                </li>
                                <li class="board-item">
                                    <a href="#" class="board-link">ì§ˆë¬¸</a>
                                    <span class="post-count">0</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9 col-md-8 main-content">
                <!-- Breadcrumb -->
                <nav aria-label="breadcrumb" class="mb-3">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html" class="text-primary">ONM</a></li>
                        <li class="breadcrumb-item"><a href="index.html" class="text-primary">ì „ì²´ê¸€ë³´ê¸°</a></li>
                        <li class="breadcrumb-item active">ê¸€ ìˆ˜ì •</li>
                    </ol>
                </nav>

                <!-- Post Edit Form -->
                <div class="post-container">
                    <form id="postForm">
                        <!-- ì œëª© -->
                        <div class="mb-3">
                            <label for="title" class="form-label">ì œëª©</label>
                            <input type="text" class="form-control" id="title" name="title" required>
                        </div>

                        <!-- ì‘ì„±ì -->
                        <div class="mb-3">
                            <label for="author" class="form-label">ì‘ì„±ì</label>
                            <input type="text" class="form-control" id="author" name="author" required>
                        </div>

                        <!-- ê²Œì‹œíŒ ì„ íƒ -->
                        <div class="mb-3">
                            <label for="board" class="form-label">ê²Œì‹œíŒ</label>
                            <select id="board" name="board" class="form-select" required>
                                <option value="" disabled>ê²Œì‹œíŒì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                                <option value="ììœ ">ììœ ê²Œì‹œíŒ</option>
                                <option value="ê³µì§€">ê³µì§€ì‚¬í•­</option>
                                <option value="ì‚¬ì§„">ì‚¬ì§„ê²Œì‹œíŒ</option>
                                <option value="ì§ˆë¬¸">ì§ˆë¬¸ê³¼ë‹µë³€</option>
                            </select>
                        </div>

                        <!-- ë‚´ìš© -->
                        <div class="mb-3">
                            <label for="content" class="form-label">ë‚´ìš©</label>
                            <textarea class="form-control" id="content" name="content" rows="8" required></textarea>
                        </div>

                        <!-- ì²¨ë¶€íŒŒì¼ -->
                        <div class="mb-3">
                            <label for="attachments" class="form-label">ì²¨ë¶€íŒŒì¼</label>
                            <input type="file" class="form-control" id="attachments" name="attachments" multiple>
                        </div>

                        <!-- ë²„íŠ¼ -->
                        <div class="text-end">
                            <button type="submit" class="btn btn-success">ìˆ˜ì •</button>
                            <a href="index.html" class="btn btn-secondary">ì·¨ì†Œ</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // URLì—ì„œ id ê°€ì ¸ì˜¤ê¸°
        function getPostId() {
            const params = new URLSearchParams(window.location.search);
            return parseInt(params.get('id'));
        }

        // localStorageì—ì„œ ê²Œì‹œê¸€ ê°€ì ¸ì˜¤ê¸°
        function getPostById(id) {
            const posts = JSON.parse(localStorage.getItem('posts')) || [];
            return posts.find(post => post.id === id);
        }

        // ê¸°ì¡´ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
        function loadPost() {
            const postId = getPostId();
            const post = getPostById(postId);

            if (!post) {
                alert('ê²Œì‹œê¸€ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                window.location.href = 'index.html';
                return;
            }

            document.getElementById('title').value = post.title;
            document.getElementById('author').value = post.author;
            document.getElementById('board').value = post.board;
            document.getElementById('content').value = post.content;
            // ì²¨ë¶€íŒŒì¼ì€ ë¡œì»¬ì—ì„œëŠ” ê¸°ë³¸ê°’ ì„¤ì • ë¶ˆê°€
        }

        // ê¸€ ìˆ˜ì • ì €ì¥
        document.getElementById('postForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const postId = getPostId();
            let posts = JSON.parse(localStorage.getItem('posts')) || [];
            const index = posts.findIndex(post => post.id === postId);
            if (index === -1) return;

            posts[index].title = document.getElementById('title').value;
            posts[index].author = document.getElementById('author').value;
            posts[index].board = document.getElementById('board').value;
            posts[index].content = document.getElementById('content').value;
            // ì²¨ë¶€íŒŒì¼ ìˆ˜ì • ë¡œì§ í•„ìš” ì‹œ ì¶”ê°€ ê°€ëŠ¥

            localStorage.setItem('posts', JSON.stringify(posts));

            alert('ê²Œì‹œê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
            window.location.href = `view.html?id=${postId}`;
        });

        document.addEventListener('DOMContentLoaded', loadPost);
    </script>
</body>

</html>