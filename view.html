<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ONM Ïπ¥Ìéò Í≤åÏãúÍ∏Ä</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="my.css">
</head>

<body>
    <!-- Header -->
    <header class="cafe-header">
        <div class="container">
            <a href="https://www.naver.com" target="_blank">
                <img src="naver.jpg" alt="NAVER" class="naver-logo">
            </a>

            <div class="cafe-logo text-center py-3">
                <img src="logo.jpg">
            </div>
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-lg-3 col-md-4 sidebar-col">
                <div class="cafe-sidebar">
                    <div class="cafe-info-card">
                        <div class="cafe-profile">
                            <img src="logo.jpg" alt="ONM" class="cafe-profile-img">
                            <p>ÌïúÏÉàÏÇ¨Îûå Í≥µÏãùÏπ¥Ìéò</p>
                            <div class="cafe-stats">
                                <div class="stat-item">
                                    <span class="stat-icon">üë•</span>
                                    <span class="stat-text">0Î™Ö</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-icon">üåç</span>
                                    <span class="stat-text">ÏßÄÏó≠Ï†ïÎ≥¥</span>
                                </div>
                            </div>
                        </div>

                        <div class="cafe-actions">
                            <button class="btn btn-success btn-block mb-2" onclick="location.href='add.html'">
                                Ïπ¥Ìéò Í∏ÄÏì∞Í∏∞
                            </button>
                            <button class="btn btn-outline-secondary btn-block">
                                Ïπ¥Ìéò Ï±ÑÌåÖ
                            </button>
                        </div>

                        <div class="board-menu">
                            <div class="board-title">
                                <span class="star-icon">‚≠ê</span>
                                Ï¶êÍ≤®Ï∞æÎäî Í≤åÏãúÌåê
                            </div>
                            <ul class="board-list">
                                <li class="board-item">
                                    <a href="index.html" class="board-link">Ï†ÑÏ≤¥Í∏ÄÎ≥¥Í∏∞</a>
                                    <span class="post-count">0</span>
                                </li>
                                <li class="board-item">
                                    <a href="#" class="board-link">Í≥µÏßÄ</a>
                                    <span class="post-count">0</span>
                                </li>
                                <li class="board-item active">
                                    <a href="#" class="board-link">ÏûêÏú†</a>
                                    <span class="post-count">0</span>
                                </li>
                                <li class="board-item">
                                    <a href="#" class="board-link">ÏÇ¨ÏßÑ</a>
                                    <span class="post-count">0</span>
                                </li>
                                <li class="board-item">
                                    <a href="#" class="board-link">ÏßàÎ¨∏</a>
                                    <span class="post-count">0</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-lg-9 col-md-8 main-content">
                <!-- Breadcrumb -->
                <nav aria-label="breadcrumb" class="mb-3">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="index.html" class="text-primary">ONM</a></li>
                        <li class="breadcrumb-item"><a href="index.html" class="text-primary">Ï†ÑÏ≤¥Í∏ÄÎ≥¥Í∏∞</a></li>
                        <li class="breadcrumb-item active">Í≤åÏãúÍ∏Ä</li>
                    </ol>
                </nav>

                <!-- Post Container -->
                <div class="post-container">
                    <!-- Post Header -->
                    <div class="post-header">
                        <div class="post-meta">
                            <span class="board-tag"></span>
                            <span class="post-number"></span>
                        </div>
                        <h1 class="post-title-main"></h1>

                        <div class="post-info">
                            <div class="author-info">
                                <p>ÏûëÏÑ±Ïûê</p>
                                <div class="author-details">
                                    <span class="author-name"></span>
                                    <span class="author-icon">üíö</span>
                                </div>
                            </div>
                            <div class="post-stats-info">
                                <span class="post-date"></span>
                                <span class="post-views"></span>
                                <span class="post-comments"></span>
                            </div>
                        </div>
                    </div>

                    <!-- Post Content -->
                    <div class="post-content">
                        <div class="content-body">
                            <!-- JSÏóêÏÑú Í≤åÏãúÍ∏Ä ÎÇ¥Ïö© Î†åÎçîÎßÅ -->
                        </div>

                        <div class="attachments">
                            <!-- JSÏóêÏÑú Ï≤®Î∂ÄÌååÏùº Î†åÎçîÎßÅ -->
                        </div>
                    </div>

                    <!-- Post Actions -->
                    <div class="post-actions">
                        <div class="author-actions">
                            <!-- ÏàòÏ†ï Î≤ÑÌäº -->
                            <button class="btn btn-primary btn-sm btn-edit">
                                <i class="fas fa-edit"></i> ÏàòÏ†ï
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="deletePost()">
                                <i class="fas fa-trash"></i> ÏÇ≠Ï†ú
                            </button>
                        </div>
                    </div>

                    <script>
                        // URLÏóêÏÑú ?id=Ïà´Ïûê Í∞ÄÏ†∏Ïò§Í∏∞
                        function getPostId() {
                            const params = new URLSearchParams(window.location.search);
                            return parseInt(params.get('id'));
                        }

                        // localStorageÏóêÏÑú Í≤åÏãúÍ∏Ä Í∞ÄÏ†∏Ïò§Í∏∞
                        function getPostById(id) {
                            const posts = JSON.parse(localStorage.getItem('posts')) || [];
                            return posts.find(post => post.id === id);
                        }

                        function renderPost() {
                            const postId = getPostId();
                            const post = getPostById(postId);

                            if (!post) {
                                alert('Í≤åÏãúÍ∏ÄÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§.');
                                window.location.href = 'index.html';
                                return;
                            }

                            document.querySelector('.post-title-main').textContent = post.title;
                            const boardTag = document.querySelector('.board-tag');
                            boardTag.textContent = post.board;
                            boardTag.className = `board-tag ${post.board.toLowerCase()}`;
                            document.querySelector('.author-name').textContent = post.author;
                            document.querySelector('.post-date').textContent = post.date;
                            document.querySelector('.post-views').textContent = `Ï°∞Ìöå ${post.views}`;
                            document.querySelector('.post-comments').textContent = `ÎåìÍ∏Ä ${post.comments}`;
                            document.querySelector('.content-body').innerHTML = post.content || '<p>ÎÇ¥Ïö©Ïù¥ ÏóÜÏäµÎãàÎã§.</p>';

                            // Ï≤®Î∂ÄÌååÏùº Î†åÎçîÎßÅ
                            if (post.attachments && post.attachments.length > 0) {
                                const attachmentsDiv = document.querySelector('.attachments');
                                attachmentsDiv.innerHTML = '<h6>Ï≤®Î∂ÄÌååÏùº</h6>';
                                post.attachments.forEach(att => {
                                    const div = document.createElement('div');
                                    div.className = 'attachment-item';
                                    div.innerHTML = `
                <i class="fas fa-file-image"></i>
                <a href="${att.url}" class="attachment-link">${att.name}</a>
                <span class="attachment-size">(${att.size})</span>
            `;
                                    attachmentsDiv.appendChild(div);
                                });
                            }

                            // ÏàòÏ†ï Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú ÌòÑÏû¨ Í∏Ä id Ï†ÑÎã¨
                            const editBtn = document.querySelector('.btn-edit');
                            editBtn.onclick = function () {
                                window.location.href = `edit.html?id=${post.id}`;
                            };
                        }

                        // Í≤åÏãúÍ∏Ä ÏÇ≠Ï†ú Í∏∞Îä•
                        function deletePost() {
                            if (!confirm("Ï†ïÎßêÎ°ú Ïù¥ Í≤åÏãúÍ∏ÄÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?")) return;

                            const postId = getPostId();
                            let posts = JSON.parse(localStorage.getItem('posts')) || [];
                            posts = posts.filter(post => post.id !== postId);
                            localStorage.setItem('posts', JSON.stringify(posts));

                            alert("Í≤åÏãúÍ∏ÄÏù¥ ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.");
                            window.location.href = 'index.html';
                        }

                        document.addEventListener('DOMContentLoaded', renderPost);
                    </script>